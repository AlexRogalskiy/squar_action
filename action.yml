name: 'Ponicode Squar'
description: 'Check if the files updated in the PR are well tested'
branding:
  icon: 'align-justify'  
  color: 'orange'
inputs: 
  repo_url:
    description: 'String: URL of the repo to be processed'
    required: true
  user_token:
    description: 'String: Ponicode SQUAR user token from Github Secrets'
    required: true
  impacted_files:
    description: 'String[]: List of the files updated in the PR'
    required: true
  branch:
    description: 'String: branch on which the PR applies'
    required: true
outputs:
  conclusion:
    description: "Conclusion of the action. Might be: success, failure, neutral, cancelled, timed_out or action_required"
  full_report_md_file: #Full report of SQUAR stored into a MD file to be displayed as output_text_description_file in github-checks action
    description: "SQUAR report on the whole repository with the specified branch"
  report_on_impacted_files_annotations: #liste of alerts coming from the impacted files to be displayed as annotations in github-checks action
    description: "SQUAR analysis on the impacted files only"
runs:
  using: 'node12'
  main: 'dist/index.js'